{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getQueryKeyHashFn, matchQuery, parseFilterArgs } from './utils';\nimport { Query } from './query';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable'; // TYPES\n// CLASS\n\nexport var QueryCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueryCache, _Subscribable);\n\n  function QueryCache() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n\n  var _proto = QueryCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var _options$queryHash;\n\n    var hashFn = getQueryKeyHashFn(options);\n    var queryKey = options.queryKey;\n    var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : hashFn(queryKey);\n    var query = this.get(queryHash);\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        options: client.defaultQueryOptions(options),\n        state: state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n\n    return query;\n  };\n\n  _proto.add = function add(query) {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query;\n      this.queries.push(query);\n      this.notify(query);\n    }\n  };\n\n  _proto.remove = function remove(query) {\n    var queryInMap = this.queriesMap[query.queryHash];\n\n    if (queryInMap) {\n      query.destroy();\n      this.queries = this.queries.filter(function (x) {\n        return x !== query;\n      });\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash];\n      }\n\n      this.notify(query);\n    }\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.queries.forEach(function (query) {\n        _this2.remove(query);\n      });\n    });\n  };\n\n  _proto.get = function get(queryHash) {\n    return this.queriesMap[queryHash];\n  };\n\n  _proto.getAll = function getAll() {\n    return this.queries;\n  };\n\n  _proto.find = function find(arg1, arg2) {\n    var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    return this.queries.find(function (query) {\n      return matchQuery(filters, query);\n    });\n  };\n\n  _proto.findAll = function findAll(arg1, arg2) {\n    var _parseFilterArgs2 = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    return filters ? this.queries.filter(function (query) {\n      return matchQuery(filters, query);\n    }) : this.queries;\n  };\n\n  _proto.notify = function notify(query) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(query);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      _this4.queries.forEach(function (query) {\n        query.onFocus();\n      });\n    });\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.queries.forEach(function (query) {\n        query.onOnline();\n      });\n    });\n  };\n\n  return QueryCache;\n}(Subscribable);","map":{"version":3,"sources":["F:/artem-pizza/admin/node_modules/react-query/es/core/queryCache.js"],"names":["_inheritsLoose","getQueryKeyHashFn","matchQuery","parseFilterArgs","Query","notifyManager","Subscribable","QueryCache","_Subscribable","_this","call","queries","queriesMap","_proto","prototype","build","client","options","state","_options$queryHash","hashFn","queryKey","queryHash","query","get","cache","defaultQueryOptions","defaultOptions","getQueryDefaults","add","push","notify","remove","queryInMap","destroy","filter","x","clear","_this2","batch","forEach","getAll","find","arg1","arg2","_parseFilterArgs","filters","findAll","_parseFilterArgs2","_this3","listeners","listener","onFocus","_this4","onOnline","_this5"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getQueryKeyHashFn, matchQuery, parseFilterArgs } from './utils';\nimport { Query } from './query';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable'; // TYPES\n\n// CLASS\nexport var QueryCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueryCache, _Subscribable);\n\n  function QueryCache() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n\n  var _proto = QueryCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var _options$queryHash;\n\n    var hashFn = getQueryKeyHashFn(options);\n    var queryKey = options.queryKey;\n    var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : hashFn(queryKey);\n    var query = this.get(queryHash);\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        options: client.defaultQueryOptions(options),\n        state: state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n\n    return query;\n  };\n\n  _proto.add = function add(query) {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query;\n      this.queries.push(query);\n      this.notify(query);\n    }\n  };\n\n  _proto.remove = function remove(query) {\n    var queryInMap = this.queriesMap[query.queryHash];\n\n    if (queryInMap) {\n      query.destroy();\n      this.queries = this.queries.filter(function (x) {\n        return x !== query;\n      });\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash];\n      }\n\n      this.notify(query);\n    }\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.queries.forEach(function (query) {\n        _this2.remove(query);\n      });\n    });\n  };\n\n  _proto.get = function get(queryHash) {\n    return this.queriesMap[queryHash];\n  };\n\n  _proto.getAll = function getAll() {\n    return this.queries;\n  };\n\n  _proto.find = function find(arg1, arg2) {\n    var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    return this.queries.find(function (query) {\n      return matchQuery(filters, query);\n    });\n  };\n\n  _proto.findAll = function findAll(arg1, arg2) {\n    var _parseFilterArgs2 = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    return filters ? this.queries.filter(function (query) {\n      return matchQuery(filters, query);\n    }) : this.queries;\n  };\n\n  _proto.notify = function notify(query) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(query);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      _this4.queries.forEach(function (query) {\n        query.onFocus();\n      });\n    });\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.queries.forEach(function (query) {\n        query.onOnline();\n      });\n    });\n  };\n\n  return QueryCache;\n}(Subscribable);"]},"metadata":{},"sourceType":"module"}