{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'; // Api\n\nimport { api } from '../../../api';\nexport const initialState = {\n  order: {\n    price: 0\n  },\n  error: null,\n  isLoading: false,\n  isAccepted: false\n};\nexport const sendOrderAsync = createAsyncThunk('checkout/sendOrderAsync', async (data, thunkAPI) => {\n  const response = await api.orders.createOrder(data);\n\n  if (response.status === 200) {\n    const results = await response.json();\n    thunkAPI.dispatch(checkoutReducer.actions.setAccept(results.status));\n    return results.status;\n  } else {\n    const error = {\n      status: response.status\n    };\n    thunkAPI.dispatch(checkoutReducer.actions.setFetchingError(error));\n  }\n});\nexport const checkoutReducer = createSlice({\n  name: 'checkout',\n  initialState,\n  reducers: {\n    stopFetching: state => {\n      state.isLoading = true;\n    },\n    setFetchingError: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    fillOrder: (state, action) => {\n      state.order = action.payload;\n      state.isLoading = false;\n      state.error = null;\n    },\n    setAccept: (state, action) => {\n      state.isAccepted = action.payload;\n      state.isLoading = false;\n      state.error = null;\n    }\n  },\n  extraReducers: {\n    [sendOrderAsync.fulfilled]: state => {\n      state.isLoading = false;\n      state.error = null;\n    },\n    [sendOrderAsync.rejected]: state => {\n      state.isLoading = false;\n      state.error = {\n        status: 'fetching error'\n      };\n    },\n    [sendOrderAsync.pending]: state => {\n      state.isLoading = true;\n    }\n  }\n});","map":{"version":3,"sources":["F:/artem-pizza/client/src/pages/checkout-page/state/checkoutReducer.js"],"names":["createSlice","createAsyncThunk","api","initialState","order","price","error","isLoading","isAccepted","sendOrderAsync","data","thunkAPI","response","orders","createOrder","status","results","json","dispatch","checkoutReducer","actions","setAccept","setFetchingError","name","reducers","stopFetching","state","action","payload","fillOrder","extraReducers","fulfilled","rejected","pending"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// Api\nimport { api } from '../../../api';\n\nexport const initialState = {\n  order: {\n    price: 0,\n  },\n  error: null,\n  isLoading: false,\n  isAccepted: false,\n};\n\nexport const sendOrderAsync = createAsyncThunk(\n  'checkout/sendOrderAsync',\n  async (data, thunkAPI) => {\n    const response = await api.orders.createOrder(data);\n    if (response.status === 200) {\n      const results = await response.json();\n      thunkAPI.dispatch(checkoutReducer.actions.setAccept(results.status));\n      return results.status;\n    } else {\n      const error = {\n        status: response.status,\n      };\n      thunkAPI.dispatch(checkoutReducer.actions.setFetchingError(error));\n    }\n  }\n);\n\nexport const checkoutReducer = createSlice({\n  name: 'checkout',\n  initialState,\n  reducers: {\n    stopFetching: state => {\n      state.isLoading = true;\n    },\n    setFetchingError: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    fillOrder: (state, action) => {\n      state.order = action.payload;\n      state.isLoading = false;\n      state.error = null;\n    },\n    setAccept: (state, action) => {\n      state.isAccepted = action.payload;\n      state.isLoading = false;\n      state.error = null;\n    },\n  },\n  extraReducers: {\n    [sendOrderAsync.fulfilled]: (state ) => {\n      state.isLoading = false;\n      state.error = null;\n    },\n    [sendOrderAsync.rejected]: state => {\n      state.isLoading = false;\n      state.error = {\n        status: 'fetching error',\n      };\n    },\n    [sendOrderAsync.pending]: state => {\n      state.isLoading = true;\n    },\n  },\n});\n"]},"metadata":{},"sourceType":"module"}