{"ast":null,"code":"import { createAction, createAsyncThunk } from '@reduxjs/toolkit'; // Api\n\nimport { api } from '../../../api'; // ActionTypes\n\nimport { actionTypes } from './loginActionTypes';\nexport const stopFetching = createAction(actionTypes.LOGIN_STOP_FETCHING);\nexport const setFetchingError = createAction(actionTypes.LOGIN_SET_FETCHING_ERROR);\nexport const setUserStatus = createAction(actionTypes.LOGIN_SET_STATUS);\nexport const fillUserData = createAction(actionTypes.LOGIN_SET_STATUS);\n/**\n * Checking user registration\n * @param credentials -> password, email\n */\n\nexport const checkUserAsync = createAsyncThunk(actionTypes.LOGIN_FETCH_ASYNC, async (credentials, thunkAPI) => {\n  const response = await api.users.login(credentials);\n\n  if (response.status === 200) {\n    const results = await response.json();\n    thunkAPI.dispatch(setUserStatus(results));\n  } else {\n    const error = {\n      status: response.status\n    };\n    thunAPI.dispatch(setFetchingError(error));\n  }\n\n  thunkAPI.dispatch(stopFetching());\n});","map":{"version":3,"sources":["F:/artem-pizza/client/src/pages/login-page/state/loginActions.js"],"names":["createAction","createAsyncThunk","api","actionTypes","stopFetching","LOGIN_STOP_FETCHING","setFetchingError","LOGIN_SET_FETCHING_ERROR","setUserStatus","LOGIN_SET_STATUS","fillUserData","checkUserAsync","LOGIN_FETCH_ASYNC","credentials","thunkAPI","response","users","login","status","results","json","dispatch","error","thunAPI"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,kBAA/C,C,CACA;;AACA,SAASC,GAAT,QAAoB,cAApB,C,CACA;;AACA,SAAQC,WAAR,QAA0B,oBAA1B;AAEA,OAAO,MAAMC,YAAY,GAAGJ,YAAY,CAACG,WAAW,CAACE,mBAAb,CAAjC;AACP,OAAO,MAAMC,gBAAgB,GAAGN,YAAY,CAACG,WAAW,CAACI,wBAAb,CAArC;AAEP,OAAO,MAAMC,aAAa,GAAGR,YAAY,CAACG,WAAW,CAACM,gBAAb,CAAlC;AAEP,OAAO,MAAMC,YAAY,GAAGV,YAAY,CAACG,WAAW,CAACM,gBAAb,CAAjC;AAEL;AACF;AACA;AACA;;AACA,OAAO,MAAME,cAAc,GAAGV,gBAAgB,CAACE,WAAW,CAACS,iBAAb,EAAgC,OAAOC,WAAP,EAAoBC,QAApB,KAAiC;AAE7G,QAAMC,QAAQ,GAAG,MAAMb,GAAG,CAACc,KAAJ,CAAUC,KAAV,CAAgBJ,WAAhB,CAAvB;;AACA,MAAIE,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,UAAMC,OAAO,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAtB;AAEAN,IAAAA,QAAQ,CAACO,QAAT,CAAkBb,aAAa,CAACW,OAAD,CAA/B;AACD,GAJD,MAIO;AACL,UAAMG,KAAK,GAAG;AACZJ,MAAAA,MAAM,EAAEH,QAAQ,CAACG;AADL,KAAd;AAGAK,IAAAA,OAAO,CAACF,QAAR,CAAiBf,gBAAgB,CAACgB,KAAD,CAAjC;AACD;;AACDR,EAAAA,QAAQ,CAACO,QAAT,CAAkBjB,YAAY,EAA9B;AACD,CAd6C,CAAvC","sourcesContent":["import { createAction, createAsyncThunk } from '@reduxjs/toolkit';\n// Api\nimport { api } from '../../../api';\n// ActionTypes\nimport {actionTypes} from './loginActionTypes';\n\nexport const stopFetching = createAction(actionTypes.LOGIN_STOP_FETCHING);\nexport const setFetchingError = createAction(actionTypes.LOGIN_SET_FETCHING_ERROR);\n\nexport const setUserStatus = createAction(actionTypes.LOGIN_SET_STATUS);\n\nexport const fillUserData = createAction(actionTypes.LOGIN_SET_STATUS);\n\n  /**\n   * Checking user registration\n   * @param credentials -> password, email\n   */\nexport const checkUserAsync = createAsyncThunk(actionTypes.LOGIN_FETCH_ASYNC, async (credentials, thunkAPI) => {\n\n  const response = await api.users.login(credentials)\n  if (response.status === 200) {\n    const results = await response.json()\n\n    thunkAPI.dispatch(setUserStatus(results))\n  } else {\n    const error = {\n      status: response.status,\n    }\n    thunAPI.dispatch(setFetchingError(error))\n  }\n  thunkAPI.dispatch(stopFetching())\n});\n\n"]},"metadata":{},"sourceType":"module"}