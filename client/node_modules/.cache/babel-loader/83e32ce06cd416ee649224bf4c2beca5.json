{"ast":null,"code":"import { createAction, createAsyncThunk } from '@reduxjs/toolkit'; // Api\n\nimport { api } from '../../../api'; // ActionTypes\n\nimport { checkoutActionTypes } from './checkoutActionTypes';\nexport const startFetching = createAction('CHECKOUT_START_FETCHING');\nexport const stopFetching = createAction('CHECKOUT_STOP_FETCHING');\nexport const setFetchingError = createAction('CHECKOUT_SET_FETCHING_ERROR');\nexport const fillOrder = createAction('CHECKOUT_FILL');\nexport const setAccept = createAction('CHECKOUT_SET_ACCEPT');\nexport const sendOrderAsync = createAction('CHECKOUT_SEND_ORDER_ASYNC');\nexport const checkoutActions = Object.freeze({\n  startFetching: () => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_START_FETCHING\n    };\n  },\n  stopFetching: () => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_STOP_FETCHING\n    };\n  },\n  setFetchingError: error => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_SET_FETCHING_ERROR,\n      payload: error\n    };\n  },\n  fillOrder: payload => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_FILL,\n      payload\n    };\n  },\n  setAccept: payload => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_SET_ACCEPT,\n      payload\n    };\n  },\n  // Async\n  sendOrderAsync: data => async dispatch => {\n    dispatch(checkoutActions.startFetching());\n    const response = await api.orders.createOrder(data);\n\n    if (response.status === 200) {\n      const {\n        message\n      } = await response.json();\n      dispatch(checkoutActions.setAccept(message));\n    } else {\n      const error = {\n        status: response.status\n      };\n      dispatch(checkoutActions.setFetchingError(error));\n    }\n\n    dispatch(checkoutActions.stopFetching());\n  }\n});","map":{"version":3,"sources":["F:/artem-pizza/client/src/pages/checkout-page/state/checkoutActions.js"],"names":["createAction","createAsyncThunk","api","checkoutActionTypes","startFetching","stopFetching","setFetchingError","fillOrder","setAccept","sendOrderAsync","checkoutActions","Object","freeze","type","CHECKOUT_START_FETCHING","CHECKOUT_STOP_FETCHING","error","CHECKOUT_SET_FETCHING_ERROR","payload","CHECKOUT_FILL","CHECKOUT_SET_ACCEPT","data","dispatch","response","orders","createOrder","status","message","json"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,kBAA/C,C,CACA;;AACA,SAASC,GAAT,QAAoB,cAApB,C,CACA;;AACA,SAASC,mBAAT,QAAoC,uBAApC;AAEA,OAAO,MAAMC,aAAa,GAAGJ,YAAY,CAAC,yBAAD,CAAlC;AACP,OAAO,MAAMK,YAAY,GAAGL,YAAY,CAAC,wBAAD,CAAjC;AACP,OAAO,MAAMM,gBAAgB,GAAGN,YAAY,CAAC,6BAAD,CAArC;AACP,OAAO,MAAMO,SAAS,GAAGP,YAAY,CAAC,eAAD,CAA9B;AACP,OAAO,MAAMQ,SAAS,GAAGR,YAAY,CAAC,qBAAD,CAA9B;AACP,OAAO,MAAMS,cAAc,GAAGT,YAAY,CAAC,2BAAD,CAAnC;AAIP,OAAO,MAAMU,eAAe,GAAGC,MAAM,CAACC,MAAP,CAAc;AAC3CR,EAAAA,aAAa,EAAE,MAAM;AACnB,WAAO;AAAES,MAAAA,IAAI,EAAEV,mBAAmB,CAACW;AAA5B,KAAP;AACD,GAH0C;AAI3CT,EAAAA,YAAY,EAAE,MAAM;AAClB,WAAO;AACLQ,MAAAA,IAAI,EAAEV,mBAAmB,CAACY;AADrB,KAAP;AAGD,GAR0C;AAS3CT,EAAAA,gBAAgB,EAAEU,KAAK,IAAI;AACzB,WAAO;AACLH,MAAAA,IAAI,EAAEV,mBAAmB,CAACc,2BADrB;AAELC,MAAAA,OAAO,EAAEF;AAFJ,KAAP;AAID,GAd0C;AAgB3CT,EAAAA,SAAS,EAAEW,OAAO,IAAI;AACpB,WAAO;AACLL,MAAAA,IAAI,EAAEV,mBAAmB,CAACgB,aADrB;AAELD,MAAAA;AAFK,KAAP;AAID,GArB0C;AAsB3CV,EAAAA,SAAS,EAAEU,OAAO,IAAI;AACpB,WAAO;AACLL,MAAAA,IAAI,EAAEV,mBAAmB,CAACiB,mBADrB;AAELF,MAAAA;AAFK,KAAP;AAID,GA3B0C;AA6B3C;AACAT,EAAAA,cAAc,EAAEY,IAAI,IAAI,MAAMC,QAAN,IAAkB;AACxCA,IAAAA,QAAQ,CAACZ,eAAe,CAACN,aAAhB,EAAD,CAAR;AAEA,UAAMmB,QAAQ,GAAG,MAAMrB,GAAG,CAACsB,MAAJ,CAAWC,WAAX,CAAuBJ,IAAvB,CAAvB;;AACA,QAAIE,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,YAAM;AAAEC,QAAAA;AAAF,UAAc,MAAMJ,QAAQ,CAACK,IAAT,EAA1B;AAEAN,MAAAA,QAAQ,CAACZ,eAAe,CAACF,SAAhB,CAA0BmB,OAA1B,CAAD,CAAR;AACD,KAJD,MAIO;AACL,YAAMX,KAAK,GAAG;AACZU,QAAAA,MAAM,EAAEH,QAAQ,CAACG;AADL,OAAd;AAGAJ,MAAAA,QAAQ,CAACZ,eAAe,CAACJ,gBAAhB,CAAiCU,KAAjC,CAAD,CAAR;AACD;;AACDM,IAAAA,QAAQ,CAACZ,eAAe,CAACL,YAAhB,EAAD,CAAR;AACD;AA7C0C,CAAd,CAAxB","sourcesContent":["import { createAction, createAsyncThunk } from '@reduxjs/toolkit';\n// Api\nimport { api } from '../../../api';\n// ActionTypes\nimport { checkoutActionTypes } from './checkoutActionTypes';\n\nexport const startFetching = createAction('CHECKOUT_START_FETCHING');\nexport const stopFetching = createAction('CHECKOUT_STOP_FETCHING');\nexport const setFetchingError = createAction('CHECKOUT_SET_FETCHING_ERROR');\nexport const fillOrder = createAction('CHECKOUT_FILL');\nexport const setAccept = createAction('CHECKOUT_SET_ACCEPT');\nexport const sendOrderAsync = createAction('CHECKOUT_SEND_ORDER_ASYNC', );\n\n\n\nexport const checkoutActions = Object.freeze({\n  startFetching: () => {\n    return { type: checkoutActionTypes.CHECKOUT_START_FETCHING };\n  },\n  stopFetching: () => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_STOP_FETCHING,\n    };\n  },\n  setFetchingError: error => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_SET_FETCHING_ERROR,\n      payload: error,\n    };\n  },\n\n  fillOrder: payload => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_FILL,\n      payload,\n    };\n  },\n  setAccept: payload => {\n    return {\n      type: checkoutActionTypes.CHECKOUT_SET_ACCEPT,\n      payload,\n    };\n  },\n\n  // Async\n  sendOrderAsync: data => async dispatch => {\n    dispatch(checkoutActions.startFetching());\n\n    const response = await api.orders.createOrder(data);\n    if (response.status === 200) {\n      const { message } = await response.json();\n\n      dispatch(checkoutActions.setAccept(message));\n    } else {\n      const error = {\n        status: response.status,\n      };\n      dispatch(checkoutActions.setFetchingError(error));\n    }\n    dispatch(checkoutActions.stopFetching());\n  },\n});\n"]},"metadata":{},"sourceType":"module"}