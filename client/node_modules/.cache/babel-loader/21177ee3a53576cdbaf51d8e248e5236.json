{"ast":null,"code":"import { createReducer, createSlice, createAsyncThunk } from '@reduxjs/toolkit'; // ActionTypes\n\nimport { checkoutActionTypes } from './checkoutActionTypes';\nexport const initialState = {\n  order: null,\n  error: null,\n  isLoading: false,\n  isAccepted: true\n};\nexport const sendOrderAsync = createAsyncThunk('checkout/sendOrderAsync', async (data, thunkAPI) => {\n  const response = await api.orders.createOrder(data);\n\n  if (response.status === 200) {\n    const {\n      message\n    } = await response.json();\n    thunkAPI.dispatch(fillOrder(message));\n  } else {\n    const error = {\n      status: response.status\n    };\n    thunkAPI.dispatch(setFetchingError(error));\n  }\n\n  thunkAPI.dispatch(stopFetching());\n});\nconst checkoutSlice = createSlice({\n  name: 'checkout',\n  initialState,\n  reducers: {\n    pendingFetching: state => {\n      state.isLoading = true;\n    },\n    startFetching: state => {\n      state.isLoading = true;\n    },\n    stopFetching: state => {\n      state.isLoading = true;\n    },\n    rejectedFeching: state => {\n      state.isLoading = false;\n      state.error = 'fetching error';\n    },\n    setFetchingError: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    fillOrder: (state, action) => {\n      state.isLoading = false;\n      state.order = action.payload;\n    },\n    setAccept: (state, action) => {\n      state.error = null;\n      state.isLoading = false;\n      state.isAccepted = action.payload;\n    }\n  },\n  extraReducers: {\n    [sendOrderAsync.fulfilled]: (state, action) => {\n      state.order = action.payload;\n    }\n  }\n});\nexport const checkoutReducer = createReducer(initialState, builder => {\n  builder.addCase('checkout/sendOrderAsync/pending', state => {\n    state.isLoading = true;\n  }).addCase('checkout/sendOrderAsync/rejected', state => {\n    state.isLoading = false;\n    state.error = 'fetching error';\n  }).addCase(checkoutActionTypes.CHECKOUT_STOP_FETCHING, state => {\n    state.isLoading = false;\n  }).addCase(checkoutActionTypes.CHECKOUT_SET_FETCHING_ERROR, (state, action) => {\n    state.isLoading = false;\n    state.error = action.payload;\n  }).addCase(checkoutActionTypes.CHECKOUT_FILL, (state, action) => {\n    state.isLoading = false;\n    state.order = action.payload;\n  }).addCase(checkoutActionTypes.CHECKOUT_SET_ACCEPT, (state, action) => {\n    state.error = null;\n    state.isLoading = false;\n    state.isAccepted = action.payload;\n  });\n});","map":{"version":3,"sources":["F:/artem-pizza/client/src/pages/checkout-page/state/checkoutReducer.js"],"names":["createReducer","createSlice","createAsyncThunk","checkoutActionTypes","initialState","order","error","isLoading","isAccepted","sendOrderAsync","data","thunkAPI","response","api","orders","createOrder","status","message","json","dispatch","fillOrder","setFetchingError","stopFetching","checkoutSlice","name","reducers","pendingFetching","state","startFetching","rejectedFeching","action","payload","setAccept","extraReducers","fulfilled","checkoutReducer","builder","addCase","CHECKOUT_STOP_FETCHING","CHECKOUT_SET_FETCHING_ERROR","CHECKOUT_FILL","CHECKOUT_SET_ACCEPT"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,WAAxB,EAAqCC,gBAArC,QAA6D,kBAA7D,C,CACA;;AACA,SAASC,mBAAT,QAAoC,uBAApC;AAEA,OAAO,MAAMC,YAAY,GAAG;AAC1BC,EAAAA,KAAK,EAAE,IADmB;AAE1BC,EAAAA,KAAK,EAAE,IAFmB;AAG1BC,EAAAA,SAAS,EAAE,KAHe;AAI1BC,EAAAA,UAAU,EAAE;AAJc,CAArB;AAOP,OAAO,MAAMC,cAAc,GAAGP,gBAAgB,CAC5C,yBAD4C,EAE5C,OAAOQ,IAAP,EAAaC,QAAb,KAA0B;AACxB,QAAMC,QAAQ,GAAG,MAAMC,GAAG,CAACC,MAAJ,CAAWC,WAAX,CAAuBL,IAAvB,CAAvB;;AACA,MAAIE,QAAQ,CAACI,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,UAAM;AAAEC,MAAAA;AAAF,QAAc,MAAML,QAAQ,CAACM,IAAT,EAA1B;AACAP,IAAAA,QAAQ,CAACQ,QAAT,CAAkBC,SAAS,CAACH,OAAD,CAA3B;AACD,GAHD,MAGO;AACL,UAAMX,KAAK,GAAG;AACZU,MAAAA,MAAM,EAAEJ,QAAQ,CAACI;AADL,KAAd;AAGAL,IAAAA,QAAQ,CAACQ,QAAT,CAAkBE,gBAAgB,CAACf,KAAD,CAAlC;AACD;;AACDK,EAAAA,QAAQ,CAACQ,QAAT,CAAkBG,YAAY,EAA9B;AACD,CAd2C,CAAvC;AAiBP,MAAMC,aAAa,GAAGtB,WAAW,CAAC;AAChCuB,EAAAA,IAAI,EAAE,UAD0B;AAEhCpB,EAAAA,YAFgC;AAGhCqB,EAAAA,QAAQ,EAAE;AACRC,IAAAA,eAAe,EAAEC,KAAK,IAAI;AACxBA,MAAAA,KAAK,CAACpB,SAAN,GAAkB,IAAlB;AACD,KAHO;AAIRqB,IAAAA,aAAa,EAAED,KAAK,IAAI;AACtBA,MAAAA,KAAK,CAACpB,SAAN,GAAkB,IAAlB;AACD,KANO;AAORe,IAAAA,YAAY,EAAEK,KAAK,IAAI;AACrBA,MAAAA,KAAK,CAACpB,SAAN,GAAkB,IAAlB;AACD,KATO;AAURsB,IAAAA,eAAe,EAAEF,KAAK,IAAI;AACxBA,MAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,MAAAA,KAAK,CAACrB,KAAN,GAAc,gBAAd;AACD,KAbO;AAcRe,IAAAA,gBAAgB,EAAE,CAACM,KAAD,EAAQG,MAAR,KAAmB;AACnCH,MAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,MAAAA,KAAK,CAACrB,KAAN,GAAcwB,MAAM,CAACC,OAArB;AACD,KAjBO;AAkBRX,IAAAA,SAAS,EAAE,CAACO,KAAD,EAAQG,MAAR,KAAmB;AAC5BH,MAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,MAAAA,KAAK,CAACtB,KAAN,GAAcyB,MAAM,CAACC,OAArB;AACD,KArBO;AAsBRC,IAAAA,SAAS,EAAE,CAACL,KAAD,EAAQG,MAAR,KAAmB;AAC5BH,MAAAA,KAAK,CAACrB,KAAN,GAAc,IAAd;AACAqB,MAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,MAAAA,KAAK,CAACnB,UAAN,GAAmBsB,MAAM,CAACC,OAA1B;AACD;AA1BO,GAHsB;AA+BhCE,EAAAA,aAAa,EAAE;AACb,KAACxB,cAAc,CAACyB,SAAhB,GAA4B,CAACP,KAAD,EAAQG,MAAR,KAAmB;AAC7CH,MAAAA,KAAK,CAACtB,KAAN,GAAcyB,MAAM,CAACC,OAArB;AACD;AAHY;AA/BiB,CAAD,CAAjC;AAsCA,OAAO,MAAMI,eAAe,GAAGnC,aAAa,CAACI,YAAD,EAAegC,OAAO,IAAI;AACpEA,EAAAA,OAAO,CACJC,OADH,CACW,iCADX,EAC8CV,KAAK,IAAI;AACnDA,IAAAA,KAAK,CAACpB,SAAN,GAAkB,IAAlB;AACD,GAHH,EAIG8B,OAJH,CAIW,kCAJX,EAI+CV,KAAK,IAAI;AACpDA,IAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,IAAAA,KAAK,CAACrB,KAAN,GAAc,gBAAd;AACD,GAPH,EAQG+B,OARH,CAQWlC,mBAAmB,CAACmC,sBAR/B,EAQuDX,KAAK,IAAI;AAC5DA,IAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACD,GAVH,EAWG8B,OAXH,CAYIlC,mBAAmB,CAACoC,2BAZxB,EAaI,CAACZ,KAAD,EAAQG,MAAR,KAAmB;AACjBH,IAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,IAAAA,KAAK,CAACrB,KAAN,GAAcwB,MAAM,CAACC,OAArB;AACD,GAhBL,EAkBGM,OAlBH,CAkBWlC,mBAAmB,CAACqC,aAlB/B,EAkB8C,CAACb,KAAD,EAAQG,MAAR,KAAmB;AAC7DH,IAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,IAAAA,KAAK,CAACtB,KAAN,GAAcyB,MAAM,CAACC,OAArB;AACD,GArBH,EAsBGM,OAtBH,CAsBWlC,mBAAmB,CAACsC,mBAtB/B,EAsBoD,CAACd,KAAD,EAAQG,MAAR,KAAmB;AACnEH,IAAAA,KAAK,CAACrB,KAAN,GAAc,IAAd;AACAqB,IAAAA,KAAK,CAACpB,SAAN,GAAkB,KAAlB;AACAoB,IAAAA,KAAK,CAACnB,UAAN,GAAmBsB,MAAM,CAACC,OAA1B;AACD,GA1BH;AA2BD,CA5B2C,CAArC","sourcesContent":["import { createReducer, createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// ActionTypes\nimport { checkoutActionTypes } from './checkoutActionTypes';\n\nexport const initialState = {\n  order: null,\n  error: null,\n  isLoading: false,\n  isAccepted: true,\n};\n\nexport const sendOrderAsync = createAsyncThunk(\n  'checkout/sendOrderAsync',\n  async (data, thunkAPI) => {\n    const response = await api.orders.createOrder(data);\n    if (response.status === 200) {\n      const { message } = await response.json();\n      thunkAPI.dispatch(fillOrder(message));\n    } else {\n      const error = {\n        status: response.status,\n      };\n      thunkAPI.dispatch(setFetchingError(error));\n    }\n    thunkAPI.dispatch(stopFetching());\n  }\n);\n\nconst checkoutSlice = createSlice({\n  name: 'checkout',\n  initialState,\n  reducers: {\n    pendingFetching: state => {\n      state.isLoading = true;\n    },\n    startFetching: state => {\n      state.isLoading = true;\n    },\n    stopFetching: state => {\n      state.isLoading = true;\n    },\n    rejectedFeching: state => {\n      state.isLoading = false;\n      state.error = 'fetching error';\n    },\n    setFetchingError: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    fillOrder: (state, action) => {\n      state.isLoading = false;\n      state.order = action.payload;\n    },\n    setAccept: (state, action) => {\n      state.error = null;\n      state.isLoading = false;\n      state.isAccepted = action.payload;\n    },\n  },\n  extraReducers: {\n    [sendOrderAsync.fulfilled]: (state, action) => {\n      state.order = action.payload;\n    },\n  },\n});\n\nexport const checkoutReducer = createReducer(initialState, builder => {\n  builder\n    .addCase('checkout/sendOrderAsync/pending', state => {\n      state.isLoading = true;\n    })\n    .addCase('checkout/sendOrderAsync/rejected', state => {\n      state.isLoading = false;\n      state.error = 'fetching error';\n    })\n    .addCase(checkoutActionTypes.CHECKOUT_STOP_FETCHING, state => {\n      state.isLoading = false;\n    })\n    .addCase(\n      checkoutActionTypes.CHECKOUT_SET_FETCHING_ERROR,\n      (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      }\n    )\n    .addCase(checkoutActionTypes.CHECKOUT_FILL, (state, action) => {\n      state.isLoading = false;\n      state.order = action.payload;\n    })\n    .addCase(checkoutActionTypes.CHECKOUT_SET_ACCEPT, (state, action) => {\n      state.error = null;\n      state.isLoading = false;\n      state.isAccepted = action.payload;\n    });\n});\n"]},"metadata":{},"sourceType":"module"}